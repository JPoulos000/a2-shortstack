<!doctype html>
<html lang="en">
  <head>
    <title>CS4241 Assignment 2</title>
    <meta charset="utf-8">
  </head>


  <body>
    table
    <form action="">
      <input type='text' id='name' value="name here">
      <input type='text' id='chore' value="chore here">
      <input type='text' id='complete' value="complete or not">
      <button id = 'submit' onclick = 'submit()'>add</button>
      <input type='text' id='modDel' value="0"> 
      <button id = 'modify'>modify</button>
      <button id = 'delete'>delete</button>
    </form>
  </body>

  <script>

  function submit() {
  //const submit = function( e ) {
    // prevent default form action from being carried out
    //e.preventDefault()

    console.log( "response" )

    const inputName = document.querySelector( '#name' )
    const inputChore = document.querySelector( '#chore' )
    const inputComplete = document.querySelector( '#complete' )
          json = {name: inputName.value, chore: inputChore.value , complete:inputComplete.value, load:0, id:-1}
          body = JSON.stringify( json )

    fetch( '/submit', {
      method:'POST',
      body 
    })
    .then( function( response ) {
      // do something with the reponse 

      console.log( response )
      fetch( '/submit', {
      method:'GET',
      body 
      })
      .then( function( response ) {
        // do something with the reponse 
      
        console.log( response )
        console.log( "response" )
      })
  
    })

    return false
  }

  const modify = function( e ) {
    // prevent default form action from being carried out
    e.preventDefault()

    console.log( "response" )

    const inputName = document.querySelector( '#name' )
    const inputChore = document.querySelector( '#chore' )
    const inputComplete = document.querySelector( '#complete' )
    const inputId = document.querySelector( '#modDel' )
          json = {name: inputName.value, chore: inputChore.value , complete:inputComplete.value, load:0, id:inputId.value}
          body = JSON.stringify( json )

    fetch( '/submit', {
      method:'POST',
      body 
    })
    .then( function( response ) {
      // do something with the reponse 

      console.log( response )
      fetch( '/submit', {
      method:'GET',
      body 
      })
      .then( function( response ) {
        // do something with the reponse 
      
        console.log( response )
  
      })
  
    })

    return false
  }

  const deleting = function( e ) {
    // prevent default form action from being carried out
    e.preventDefault()

    console.log( "response" )

    const inputName = document.querySelector( '#name' )
    const inputChore = document.querySelector( '#chore' )
    const inputComplete = document.querySelector( '#complete' )
    const inputId = document.querySelector( '#modDel' )
          json = {name: inputName.value, chore: inputChore.value , complete:inputComplete.value, load:-1, id:inputId.value}
          body = JSON.stringify( json )

    fetch( '/submit', {
      method:'POST',
      body 
    })
    .then( function( response ) {
      // do something with the reponse 

      console.log( response )
      fetch( '/submit', {
      method:'GET',
      body 
      })
      .then( function( response ) {
        // do something with the reponse 
      
        console.log( response )
  
      })
  
    })

    return false
  }

  window.onload = function() {
    /*const subbutton = document.querySelector( '#submit' )
    subbutton.onclick = submit
    const subbutton = document.querySelector( '#modify' )
    subbutton.onclick = modify
    const subbutton = document.querySelector( '#delete' )//delete not allowed
    subbutton.onclick = deleteing*/
  }

  </script>
</html>
